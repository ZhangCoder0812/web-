

# nextTick 原理及使用场景

   原理：
       - nextTick 作用是保证数据/dom更新完毕后 再去获取。
       - vue的更新策略是异步的，原因是防止频繁修改 频繁更新，等数据都改完了
         在一次性更新。
       - vue一旦观测到数据变化，会在内部维护一个数组，把对应的watcher放到这个
         数组中，当用户调用nextTick时，会把传入的回调函数 fn 放到这个数组的最
         后面。[watcher,watcher,...,fn]这样就保证了更新操作先于 fn 执行，可以
         获取到最新数据/dom。
       - 更新操作放在nextTick前面，调用nextTick可以拿到最近结果。  
         this.xxx = 123 
         this.$nextTick(()=>{
             console.log( this.xxx )
         })
        - 更新操作放在nextTick后面，调用nextTick拿不到最新结果  。 
         this.$nextTick(()=>{
             console.log( this.xxx )
         })  
         this.xxx = 123 

       - vue更新dom是异步的，一旦观测到数据变化会开启一个队列，把同一事件
         循环中观测到数据变化的watcher放到这个队列。如果一个watcher被触发
         多次，那么只会添加一次到队列，这种缓冲行为避免多余的计算提高渲染性能
       - 第一次更新数据内部会调用一次nextTick，然后开启一个异步任务，之后
         用户再调用nextTick会将传入的回调函数放到一个数组中，最后依次执行。
       - nextTick只有第一次是异步的，之后都是同步的，只是维护了一个回调数组flushCallbacks  